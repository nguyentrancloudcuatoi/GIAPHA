<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Layout</title>
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Mobile Menu Button -->
    <div class="mobile-menu">
        <button class="menu-btn">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="logo">
            <img src="/assets/images/Logo.png" alt="logo-img">
        </div>
        <ul class="nav-links">
            <li><a href="/templates/Editor/index.html"><i class="fas fa-home"></i> Trang chủ</a></li>
            <li><a href="/templates/Editor/templates/quanlythanhvien.html"><i class="fas fa-user-friends"></i> Quản lý Thành viên</a></li>
            <li><a href="/templates/Editor/templates/quanlygiapha.html"><i class="fas fa-sliders-h"></i> Quản lý Gia phả</a></li>
            <li><a href="/templates/Editor/templates/phaky.html"><i class="fas fa-list-alt"></i> Phả ký</a></li>
            <li><a href="/templates/Editor/templates/congduc.html"><i class="fas fa-hand-holding-heart"></i> Công đức</a></li>
            <li><a href="/templates/Editor/templates/ngoaipha.html"><i class="fas fa-book"></i> Ngoại phả</a></li>
            <li><a href="/templates/Editor/templates/hinhanh.html"><i class="fas fa-image"></i> Hình ảnh</a></li>
        </ul>
        <div style="position: absolute; bottom: 2rem; width: calc(100% - 3rem);">
            <ul class="nav-links">
                <li><a href="/templates/Editor/templates/setting.html"><i class="fas fa-cog"></i> Cài đặt</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" style="background:#f7f7f7; min-height:100vh;">
        <h1 class="page-title">Dashboard Tổng Quan</h1>
        
        <!-- Thống kê tổng quan -->
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-users"></i>
                <div class="stat-info">
                    <h3>Tổng thành viên</h3>
                    <p class="stat-number">1,234</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-hand-holding-heart"></i>
                <div class="stat-info">
                    <h3>Tổng công đức</h3>
                    <p class="stat-number">5,678,000đ</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-user-plus"></i>
                <div class="stat-info">
                    <h3>Thành viên mới (tháng)</h3>
                    <p class="stat-number">45</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-chart-line"></i>
                <div class="stat-info">
                    <h3>Công đức (tháng)</h3>
                    <p class="stat-number">1,200,000đ</p>
                </div>
            </div>
        </div>

        <!-- Biểu đồ thống kê -->
        <div class="charts-container">
            <!-- Biểu đồ thành viên -->
            <div class="chart-card">
                <h3>Thống kê thành viên theo tháng</h3>
                <canvas id="memberChart"></canvas>
            </div>
            
            <!-- Biểu đồ công đức -->
            <div class="chart-card">
                <h3>Thống kê công đức theo tháng</h3>
                <canvas id="donationChart"></canvas>
            </div>
        </div>

        <!-- Hoạt động gần đây -->
        <div class="recent-activities">
            <h2>Hoạt động gần đây</h2>
            <div class="activities-grid">
                <div class="activity-card">
                    <h3>Thành viên mới nhất</h3>
                    <ul class="activity-list">
                        <li>
                            <span class="activity-name">Nguyễn Văn A</span>
                            <span class="activity-date">01/06/2024</span>
                        </li>
                        <li>
                            <span class="activity-name">Trần Thị B</span>
                            <span class="activity-date">30/05/2024</span>
                        </li>
                        <li>
                            <span class="activity-name">Lê Văn C</span>
                            <span class="activity-date">28/05/2024</span>
                        </li>
                    </ul>
                </div>
                <div class="activity-card">
                    <h3>Công đức gần đây</h3>
                    <ul class="activity-list">
                        <li>
                            <span class="activity-name">Nguyễn Văn A</span>
                            <span class="activity-amount">1,000,000đ</span>
                            <span class="activity-date">01/06/2024</span>
                        </li>
                        <li>
                            <span class="activity-name">Trần Thị B</span>
                            <span class="activity-amount">500,000đ</span>
                            <span class="activity-date">30/05/2024</span>
                        </li>
                        <li>
                            <span class="activity-name">Lê Văn C</span>
                            <span class="activity-amount">200,000đ</span>
                            <span class="activity-date">28/05/2024</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Khởi tạo biểu đồ thành viên
        const memberCtx = document.getElementById('memberChart').getContext('2d');
        new Chart(memberCtx, {
            type: 'line',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [{
                    label: 'Số lượng thành viên mới',
                    data: [30, 45, 60, 35, 50, 45, 55, 40, 45, 50, 45, 40],
                    borderColor: '#4e73df',
                    tension: 0.4,
                    fill: true,
                    backgroundColor: 'rgba(78, 115, 223, 0.1)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Khởi tạo biểu đồ công đức
        const donationCtx = document.getElementById('donationChart').getContext('2d');
        new Chart(donationCtx, {
            type: 'bar',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [{
                    label: 'Tổng công đức (triệu đồng)',
                    data: [5, 7, 4, 6, 8, 5, 9, 7, 6, 8, 7, 9],
                    backgroundColor: '#1cc88a',
                    borderRadius: 5
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            const menuBtn = document.querySelector('.menu-btn');
            const sidebar = document.querySelector('.sidebar');
            const navLinks = document.querySelectorAll('.nav-links li');
            
            // Mobile menu toggle
            menuBtn.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });

            // Close sidebar when clicking outside
            document.addEventListener('click', function(event) {
                if (!sidebar.contains(event.target) && !menuBtn.contains(event.target) && sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            });

            // Handle active state for navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('active'));
                    // Add active class to clicked link
                    this.classList.add('active');
                });
            });

            // Set active state based on current page
            const currentPage = window.location.pathname.split('/').pop();
            navLinks.forEach(link => {
                const href = link.querySelector('a').getAttribute('href');
                if (href === currentPage) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Gia Phả - Gia Phả Số</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/gojs/release/go.js"></script>
    <link rel="stylesheet" href="../../Editor/css/quanlygiapha.css">
</head>
<body>
    <!-- Mobile Menu Button -->
    <div class="mobile-menu">
        <button class="menu-btn">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="logo">
            <img src="/assets/images/Logo.png" alt="logo-img">
        </div>
        <ul class="nav-links">
            <li><a href="/templates/Editor/index.html"><i class="fas fa-home"></i> Trang chủ</a></li>
            <li><a href="/templates/Editor/templates/quanlythanhvien.html"><i class="fas fa-user-friends"></i> Quản lý Thành viên</a></li>
            <li><a href="/templates/Editor/templates/quanlygiapha.html" class="active"><i class="fas fa-sitemap"></i> Quản lý Gia phả</a></li>
            <li><a href="/templates/Editor/templates/phaky.html"><i class="fas fa-book"></i> Phả ký</a></li>
            <li><a href="/templates/Editor/templates/congduc.html"><i class="fas fa-hand-holding-heart"></i> Công đức</a></li>
            <li><a href="/templates/Editor/templates/ngoaipha.html"><i class="fas fa-users"></i> Ngoại phả</a></li>
        </ul>
        <div style="position: absolute; bottom: 2rem; width: calc(100% - 3rem);">
            <ul class="nav-links">
                <li><a href="/templates/Editor/templates/setting.html"><i class="fas fa-cog"></i> Cài đặt</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <h1 class="page-title">Quản Lý Gia Phả</h1>

        <div class="controls">
            <button class="btn btn-primary" onclick="zoomIn()">
                <i class="fas fa-search-plus"></i> Phóng to
            </button>
            <button class="btn btn-primary" onclick="zoomOut()">
                <i class="fas fa-search-minus"></i> Thu nhỏ
            </button>
            <button class="btn btn-secondary" onclick="centerTree()">
                <i class="fas fa-compress-arrows-alt"></i> Căn giữa
            </button>
            <button class="btn btn-primary" onclick="openAddMemberModal()">
                <i class="fas fa-user-plus"></i> Thêm thành viên
            </button>
            <button class="btn btn-primary" onclick="toggleLinkMode()">
                <i class="fas fa-link"></i> Nối kết nối
            </button>
            <button class="btn btn-primary" onclick="toggleDeleteMode()">
                <i class="fas fa-trash"></i> Chế độ xóa
            </button>
        </div>

        <div class="tree-container">
            <div id="myDiagramDiv"></div>
        </div>

        <!-- Modal thêm thành viên -->
        <div class="modal" id="addMemberModal">
            <div class="modal-content">
                <h2>Thêm thành viên gia phả</h2>
                <form id="addMemberForm">
                    <div class="form-group">
                        <label>Họ và tên:</label>
                        <input type="text" id="memberName" required>
                    </div>
                    <div class="form-group">
                        <label>Vai trò trong gia phả:</label>
                        <select id="memberRole" required>
                            <option value="">-- Chọn vai trò --</option>
                            <option value="ong_noi">Ông nội</option>
                            <option value="ba_noi">Bà nội</option>
                            <option value="ong_ngoai">Ông ngoại</option>
                            <option value="ba_ngoai">Bà ngoại</option>
                            <option value="cha">Cha</option>
                            <option value="me">Mẹ</option>
                            <option value="chu">Chú</option>
                            <option value="bac">Bác</option>
                            <option value="co">Cô</option>
                            <option value="di">Dì</option>
                            <option value="anh">Anh</option>
                            <option value="chi">Chị</option>
                            <option value="em">Em</option>
                            <option value="chau">Cháu</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Đời thứ:</label>
                        <input type="number" id="memberGeneration" min="1" required>
                    </div>
                    <div class="form-group">
                        <label>Ngày sinh:</label>
                        <input type="date" id="birthDate">
                    </div>
                    <div class="form-group">
                        <label>Số điện thoại:</label>
                        <input type="tel" id="phone">
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="email" placeholder="Nhập địa chỉ email">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Thêm</button>
                        <button type="button" class="btn btn-secondary" onclick="closeAddMemberModal()">Hủy</button>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <script src="../../Editor/js/quanlygiapha.js"></script>
</body>
</html>
